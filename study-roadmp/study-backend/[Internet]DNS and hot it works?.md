# DNS and How It Works

## DNS란?

DNS(Domain Name System)는 사람이 읽을 수 있는 도메인 이름(예: www.google.com)을 컴퓨터가 이해할 수 있는 IP 주소(예: 142.250.206.14)로 변환해주는 시스템이다.

> 쉽게 말하면, DNS는 "인터넷의 전화번호부" 역할을 한다.

## 왜 DNS가 필요할까?

- 컴퓨터는 숫자인 IP 주소를 통해 서로 통신한다.
- 사람은 숫자(IP 주소)를 기억하기 어렵기 때문에, 문자로 된 도메인 이름을 사용한다.
- DNS는 도메인 이름을 입력하면 해당하는 IP 주소를 찾아준다.
- 덕분에 우리는 복잡한 숫자 대신 기억하기 쉬운 이름으로 웹사이트에 접속할 수 있다.

## DNS 작동 과정

1. **도메인 이름 입력**
   - 사용자가 브라우저에 `www.google.com` 같은 도메인 이름을 입력한다.

2. **캐시 확인**
   - 먼저 브라우저, 운영체제, 또는 로컬 네트워크에 저장된 DNS 캐시를 확인한다.
   - 캐시에 IP 주소가 있으면 바로 사용한다.

3. **로컬 DNS 서버(Resolver) 요청**
   - 캐시에 없다면, 설정된 로컬 DNS 서버(보통 ISP나 회사 제공)에 요청한다.

4. **DNS 서버 탐색**
   - 로컬 DNS 서버가 IP를 모르면, 다음과 같은 순서로 요청을 전달한다.
     1. **Root DNS 서버**에 질의 → ".com"을 담당하는 TLD 서버를 알려줌
     2. **TLD DNS 서버**에 질의 → "google.com"을 담당하는 권한 있는 서버를 알려줌
     3. **Authoritative DNS 서버**에 질의 → "www.google.com"의 최종 IP 주소를 응답

5. **IP 주소 응답**
   - IP 주소를 찾으면, 요청한 브라우저에 응답한다.

6. **웹 서버 접속**
   - 브라우저는 받은 IP 주소를 사용해 웹 서버에 접속하고, 웹페이지를 요청하여 화면에 표시한다.

## www.google.com 예시 정리

- 사용자가 `www.google.com` 입력
- 브라우저가 DNS 캐시를 확인 → 없으면 로컬 DNS 서버에 요청
- 로컬 DNS 서버가 다음과 같이 동작
  1. **Root 서버**에 요청: ".com"에 대한 TLD 서버 주소를 받음
  2. **.com TLD 서버**에 요청: "google.com"에 대한 Authoritative 서버 주소를 받음
  3. **google.com Authoritative 서버**에 요청: "www.google.com"에 대한 최종 IP 주소를 얻음 (예: 142.250.206.4)
- 이 IP 주소를 이용해 구글 웹 서버에 접속하여 웹페이지를 불러온다.

## DNS의 계층 구조

| 단계 | 설명 |
| --- | --- |
| Root DNS 서버 | 최상위 DNS 서버로, TLD 서버(.com, .org 등)를 알려준다. |
| TLD DNS 서버 | 각 최상위 도메인에 대한 서버 정보를 관리한다. |
| Authoritative DNS 서버 | 실제 도메인 이름에 해당하는 IP 주소를 가지고 있는 서버이다. |

## 추가 개념: DNS 캐시

- DNS 질의 결과는 캐시되어 일정 시간 동안 저장된다.
- 덕분에 같은 웹사이트에 재접속할 때 훨씬 빠르게 연결할 수 있다.
- 캐시에는 유효 기간(Time-To-Live, TTL)이 설정되어 있다.
