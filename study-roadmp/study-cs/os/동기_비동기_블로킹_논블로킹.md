# 🔄 동기/비동기 vs 블로킹/논블로킹 정리

---

## 개념 요약

| 분류 | 기준 | 의미 | 예시 |
|------|------|------|------|
| **동기** | 호출자 | 결과를 기다림 (응답 전까지 대기) | Java `.send()`, Python `requests.get()` |
| **비동기** | 호출자 | 결과를 기다리지 않고 다음 코드 실행 | Java `.sendAsync()`, JS `fetch().then()` |
| **블로킹** | 함수 | 함수가 끝날 때까지 멈춤 | `socket.read()` |
| **논블로킹** | 함수 | 함수가 즉시 리턴 | `socket.read() == null`, `select()` |

**“블로킹”이란 말은어떤 ‘외부 자원의 응답’을 기다리느라 코드 실행이 멈춘다는 뜻입니다.
그래서 블로킹은 주로 I/O 상황에서 발생합니다.

---

## 네 가지 조합과 사용 시점

### 1. 동기 + 블로킹
- 전통적인 방식, 가장 직관적
- 응답 올 때까지 전체 흐름 멈춤
- **간단한 CLI 앱 / 초기 프로토타입 / 직관적 흐름이 중요할 때**

```java
String response = httpClient.send(request); // 기다림
```

---

### 🔹 2. 동기 + 논블로킹
- 함수는 바로 리턴되지만, 결과를 직접 계속 확인해야 함
- **이벤트 큐 없이 반복적으로 상태 확인할 수밖에 없을 때**

```java
while (!isReady()) {
    Thread.sleep(100);
}
```

---

### 3. 비동기 + 블로킹
- 거의 쓰지 않음
- 비동기 콜백인데 내부에서 블로킹 → 설계가 이상할 수 있음
- **레거시 코드와 비동기 코드 연결 시 잠깐**

---

### 4. 비동기 + 논블로킹 
- 가장 이상적 / 이벤트 기반 / 성능 우수
- **웹 서버, 게임 서버, 고성능 네트워크 서버 (Node.js, Netty)**

```javascript
fetch(url).then(res => console.log(res));
```

```java
CompletableFuture.supplyAsync(() -> getData())
                 .thenAccept(System.out::println);
```

---

## 💼 언제 무엇을 쓰면 좋을까?

| 상황 | 추천 방식 | 이유 |
|------|------------|------|
| 단순한 요청/응답 (ex. REST API 호출) | 동기 + 블로킹 | 직관적이고 간단 |
| UI 앱 (ex. 안드로이드, 데스크탑) | 비동기 + 논블로킹 | UI 멈추지 않도록 |
| 고성능 서버 (ex. 게임 서버, 웹서버) | 비동기 + 논블로킹 | 병렬 처리 성능 향상 |
| 파일 읽기/쓰기 (대용량) | 동기 or 비동기 + 블로킹 | OS I/O 버퍼 활용 |
| 실시간 채팅, 스트리밍 | 비동기 + 논블로킹 | 실시간 처리, 반응성 높임 |

게임서버 예시
- 앞으로가 요청이 들어왔을때

블로킹 - doSomething()이 실행되기를 기다림
```
// 요청 수신 쓰레드 (예: I/O 쓰레드)
onMessage() {
    doSomething(); // 직접 실행 (작업이 끝날 때까지 대기)
    return;        // 이후에야 리턴 가능
}
```

논블로킹 - doSomething()을 큐에넣고 바로 리턴 
```
// 요청 수신 쓰레드 (예: I/O 쓰레드)
onMessage() {
    taskQueue.add(() -> doSomething()); // 큐에 위임
    return; // 바로 리턴
}

// Worker Thread
while (true) {
    Runnable task = taskQueue.poll();
    if (task != null) task.run(); // 별도 쓰레드가 실행
}
```

---

## 한 줄 요약

- **동기/비동기**는 "내가 결과를 기다리는가?"
- **블로킹/논블로킹**은 "함수가 바로 리턴하는가?"
- 각각 상황에 맞게 **조합해서 사용하는 것**이 핵심입니다.

- 논블로킹의 “바로 리턴”이란 “결과를 기다리지 않고, 지금 가능한 상태만 말하고 끝낸다”는 뜻
"""
