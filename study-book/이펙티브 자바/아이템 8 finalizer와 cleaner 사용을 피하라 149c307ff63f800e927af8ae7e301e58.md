# 아이템 8: finalizer와 cleaner 사용을 피하라

### **요약:**

finalizer와 cleaner는 객체가 더 이상 사용되지 않을 때 정리 작업을 수행하도록 제공되는 기능이지만, **예측 불가능하고 성능이 저하**되며, **보안 문제**를 유발할 수 있으므로 사용을 피하는 것이 좋습니다.

**핵심 내용:**

- **finalizer의 문제점**
    - **예측 불가능성**:
        - GC(Garbage Collector)가 객체를 회수할 때 finalizer가 호출되므로, **호출 시점이 보장되지 않**
        - 객체 정리가 즉시 이루어지지 않아 리소스 누수 가능성이 있음.
    - **성능 저하**:
        - finalizer는 객체를 GC 대상으로 표시한 후에도 별도의 큐에서 처리되므로, **GC 작업이 지연**되고 **처리 비용이 증가**.
    - **오류 무시**:
        - finalizer가 호출 중에 예외를 던지더라도 무시되며, 프로그램의 안정성에 영향을 줄 수 있음.
    - **보안 문제**:
        - finalizer를 악용하여 이미 폐기된 객체를 부활시킬 수 있음(생성자 실패 시 객체 접근 등).
- **cleaner의 문제점**
    - cleaner는 finalizer보다 개선된 대안이지만, **성능 저하**와 **예측 불가능성** 문제를 완전히 해결하지 못함.
    - **Thread Safety**를 제공하긴 하지만, 중요한 리소스 해제를 cleaner에 의존하면 안 됨.
- **대안: 명시적 정리**
    - 리소스 해제는 **try-with-resources** 또는 **try-finally**와 같은 **명시적 관리 방식**을 사용하라.
    - 명시적 리소스 해제는 객체의 생명주기와 정리 시점을 **개발자가 직접 제어**할 수 있어 안정적.
- **finalizer/cleaner 사용이 불가피한 경우**
    - **Native Resources**: 중요한 네이티브 리소스를 다룰 때 반드시 보조적인 역할로 사용.
    - **보조 작업**: 로깅 같은 비필수 작업에 한해 사용할 수 있음.

**권장사항**

- **리소스 관리 시에는 항상 명시적 방법(**try-with-resources**)을 사용하라.**
- finalizer와 cleaner는 **절대 중요한 리소스 정리 작업에 사용하지 말라.**

**요약 문구:**

- finalizer와 cleaner는 예측 불가능하고 성능 저하를 일으키므로 사용을 피하고, 리소스 관리는 명시적으로 처리하라.